<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Emergency Operations Dashboard</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background-color: #001f3f;
    color: white;
    display: flex;
    height: 100vh;
  }

  /* Sidebar */
  .sidebar {
    width: 240px;
    background-color: #00264d;
    padding-top: 20px;
    display: flex;
    flex-direction: column;
  }

  .sidebar button {
    background: none;
    border: none;
    color: white;
    padding: 18px 20px;
    text-align: left;
    cursor: pointer;
    font-size: 16px;
    border-bottom: 1px solid #004080;
    transition: 0.3s;
  }

  .sidebar button:hover {
    background-color: #004080;
  }

  /* Main content */
  .main {
    flex: 1;
    padding: 20px;
    overflow-y: auto;
  }

  section {
    display: none;
  }

  section.active {
    display: block;
  }

  h2 {
    margin-top: 0;
  }

  input, select, button.add-btn {
    margin: 5px 0;
    padding: 5px;
    font-size: 14px;
  }

  button.add-btn {
    background-color: #0074D9;
    border: none;
    color: white;
    cursor: pointer;
    transition: 0.3s;
  }

  button.add-btn:hover {
    background-color: #005fa3;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
    color: white;
  }

  table, th, td {
    border: 1px solid white;
  }

  th, td {
    padding: 8px;
    text-align: left;
  }

  .off-duty-btn {
    background-color: red;
    color: white;
    border: none;
    padding: 5px 10px;
    cursor: pointer;
    transition: 0.3s;
  }

  .off-duty-btn:hover {
    background-color: darkred;
  }

  /* Card style for incidents and watchlist */
  .card {
    background-color: #003366;
    padding: 10px;
    margin: 10px 0;
    border-radius: 8px;
    animation: fadeIn 0.5s;
  }

  @keyframes fadeIn {
    from {opacity:0; transform: translateY(-5px);}
    to {opacity:1; transform: translateY(0);}
  }

  a {
    color: #1E90FF;
    text-decoration: none;
  }

  a:hover {
    text-decoration: underline;
  }

</style>
</head>
<body>

<!-- Sidebar -->
<div class="sidebar">
  <button onclick="showSection('dashboard')">Dashboard</button>
  <button onclick="showSection('incidents')">Active Incidents</button>
  <button onclick="showSection('contacts')">Contacts / On Duty</button>
</div>

<!-- Main Content -->
<div class="main">
  <!-- Dashboard -->
  <section id="dashboard" class="active">
    <h2>Dashboard</h2>

    <h3>On/Off Duty</h3>
    <button onclick="goOnDuty()">Go On Duty</button>
    <button onclick="goOffDuty()">Go Off Duty</button>

    <h3>Vehicle Plate Search</h3>
    <input type="text" id="plateInput" placeholder="Enter vehicle plate">
    <button onclick="searchPlate()">Search</button>

    <h3>Watchlist</h3>
    <input type="text" id="vehicleReg" placeholder="Registration">
    <input type="text" id="vehicleDetails" placeholder="Vehicle details">
    <button class="add-btn" onclick="addVehicle()">Add to Watchlist</button>

    <div id="vehicleList"></div>
  </section>

  <!-- Active Incidents -->
  <section id="incidents">
    <h2>Active Incidents</h2>
    <input type="text" id="incidentAddress" placeholder="Address of incident">
    <input type="text" id="incidentType" placeholder="Type (Fire, Robbery, Medical)">
    <input type="text" id="onScene" placeholder="Personnel on scene">
    <button class="add-btn" onclick="addIncident()">Add Incident</button>

    <div id="incidentList"></div>
  </section>

  <!-- Contacts / On Duty -->
  <section id="contacts">
    <h2>Contacts / On Duty</h2>
    <input type="text" id="contactName" placeholder="Name">
    <input type="text" id="contactNumber" placeholder="Contact Number">
    <button class="add-btn" onclick="addContact()">Add Person</button>

    <div id="contactList"></div>
  </section>
</div>

<!-- Sounds -->
<audio id="alertSound" src="https://www.soundjay.com/button/beep-07.wav" preload="auto"></audio>

<script>
  // --- Sidebar switch ---
  function showSection(id) {
    document.querySelectorAll('section').forEach(sec => sec.classList.remove('active'));
    document.getElementById(id).classList.add('active');
  }

  // --- Local Storage helpers ---
  function saveData(key, data) {
    localStorage.setItem(key, JSON.stringify(data));
  }

  function loadData(key) {
    return JSON.parse(localStorage.getItem(key)) || [];
  }

  const alertSound = document.getElementById('alertSound');

  // --- Dashboard ---
  function goOnDuty() {
    alertSound.play();
    alert("You are now ON duty!");
  }

  function goOffDuty() {
    alertSound.play();
    alert("You are now OFF duty!");
  }

  function searchPlate() {
    const plate = document.getElementById('plateInput').value;
    if (plate) {
      alert(`Searching for vehicle: ${plate}`);
      document.getElementById('plateInput').value = '';
    }
  }

  function addVehicle() {
    const reg = document.getElementById('vehicleReg').value;
    const details = document.getElementById('vehicleDetails').value;
    if (!reg || !details) return;

    let vehicles = loadData('vehicles');
    vehicles.push({ reg, details });
    saveData('vehicles', vehicles);
    document.getElementById('vehicleReg').value = '';
    document.getElementById('vehicleDetails').value = '';
    alertSound.play();
    renderVehicles();
  }

  function renderVehicles() {
    const container = document.getElementById('vehicleList');
    container.innerHTML = '';
    loadData('vehicles').forEach(v => {
      const div = document.createElement('div');
      div.className = 'card';
      div.innerText = `${v.reg} — ${v.details}`;
      container.appendChild(div);
    });
  }

  // --- Incidents ---
  function addIncident() {
    const address = document.getElementById('incidentAddress').value;
    const type = document.getElementById('incidentType').value;
    const personnel = document.getElementById('onScene').value;
    if (!address || !type || !personnel) return;

    let incidents = loadData('incidents');
    incidents.push({ address, type, personnel });
    saveData('incidents', incidents);
    document.getElementById('incidentAddress').value = '';
    document.getElementById('incidentType').value = '';
    document.getElementById('onScene').value = '';
    alertSound.play();
    renderIncidents();
  }

  function renderIncidents() {
    const container = document.getElementById('incidentList');
    container.innerHTML = '';
    loadData('incidents').forEach((inc, idx) => {
      const div = document.createElement('div');
      div.className = 'card';
      div.innerHTML = `
        <strong><a href="https://www.google.com/maps/search/${encodeURIComponent(inc.address)}" target="_blank">${inc.address}</a></strong><br>
        Type: ${inc.type}<br>
        On Scene: ${inc.personnel} <br>
        <button class="off-duty-btn" onclick="removeIncident(${idx})">Stand Off</button>
      `;
      container.appendChild(div);
    });
  }

  function removeIncident(idx) {
    let incidents = loadData('incidents');
    incidents.splice(idx, 1);
    saveData('incidents', incidents);
    alertSound.play();
    renderIncidents();
  }

  // --- Contacts / On Duty ---
  function addContact() {
    const name = document.getElementById('contactName').value;
    const number = document.getElementById('contactNumber').value;
    if (!name || !number) return;

    let contacts = loadData('contacts');
    contacts.push({ name, number });
    saveData('contacts', contacts);
    document.getElementById('contactName').value = '';
    document.getElementById('contactNumber').value = '';
    alertSound.play();
    renderContacts();
  }

  function removeContact(idx) {
    let contacts = loadData('contacts');
    contacts.splice(idx, 1);
    saveData('contacts', contacts);
    alertSound.play();
    renderContacts();
  }

  function renderContacts() {
    const container = document.getElementById('contactList');
    container.innerHTML = '';
    loadData('contacts').forEach((c, idx) => {
      const div = document.createElement('div');
      div.className = 'card';
      div.innerHTML = `${c.name} — ${c.number} <button class="off-duty-btn" onclick="removeContact(${idx})">Remove</button>`;
      container.appendChild(div);
    });
  }

  // --- Initial render ---
  renderVehicles();
  renderIncidents();
  renderContacts();

</script>
</body>
</html>
